Object subclass: #Post	instanceVariableNames: 'texto fechaDeCreacion usuario votosPositivos votosNegativos'	classVariableNames: ''	package: 'Objetos2-Model'!!Post methodsFor: 'initialization' stamp: 'Huggias 5/7/2020 11:14'!initialize: unUsuario texto: unTexto	fechaDeCreacion := DateAndTime now.	usuario:= unUsuario.	texto:= unTexto.	votosPositivos:= OrderedCollection new.	votosNegativos:= OrderedCollection new.! !!Post methodsFor: 'public' stamp: 'Huggias 5/16/2020 11:48'!agregarVotoPositivoDe: user	self removerVotoDe: user aUnaColeccion: votosNegativos. 	self agregar: (Voto usuario: user) aUnaColeccion: votosPositivos. ! !!Post methodsFor: 'public' stamp: 'Huggias 5/16/2020 11:41'!soyDe: unUsuario	^(usuario = unUsuario).! !!Post methodsFor: 'public' stamp: 'Huggias 5/8/2020 17:02'!diferenciaDeLikes	| cantidadDeVotosPositivos cantidadDeVotosNegativos |	cantidadDeVotosPositivos := self votosPositivos size.	cantidadDeVotosNegativos := self votosNegativos size.	^cantidadDeVotosPositivos - cantidadDeVotosNegativos.! !!Post methodsFor: 'public' stamp: 'Huggias 5/16/2020 11:49'!agregarVotoNegativoDe: user	self removerVotoDe: user aUnaColeccion: votosPositivos. 	self agregar: (Voto usuario: user) aUnaColeccion: votosNegativos. ! !!Post methodsFor: 'accessing'!usuario	^usuario! !!Post methodsFor: 'accessing' stamp: 'Huggias 5/7/2020 11:14'!fecha	^fechaDeCreacion.! !!Post methodsFor: 'accessing' stamp: 'Huggias 4/8/2020 12:07'!texto	^texto.! !!Post methodsFor: 'accessing' stamp: 'Huggias 5/7/2020 11:15'!votosNegativos	^votosNegativos! !!Post methodsFor: 'accessing' stamp: 'Huggias 5/7/2020 11:15'!votosPositivos	^votosPositivos! !!Post methodsFor: 'accessing' stamp: 'Huggias 4/8/2020 12:31'!texto: unTexto	texto := unTexto.! !!Post methodsFor: 'private' stamp: 'Huggias 5/8/2020 16:51'!agregar: unVoto aUnaColeccion: unaColeccionDeVotos	(unaColeccionDeVotos anySatisfy: [:voto | (voto usuario) = (unVoto usuario)  ])ifFalse: [ 		unaColeccionDeVotos add: unVoto. 	].	! !!Post methodsFor: 'private' stamp: 'Huggias 5/7/2020 12:16'!removerVotoDe: unUsuario aUnaColeccion: unaColeccionDeVotos	unaColeccionDeVotos removeAllSuchThat: [ :voto | (voto usuario) = unUsuario  ].	! !!Post methodsFor: 'private' stamp: 'Huggias 5/7/2020 12:40'!coleccionDeVotos: aBoolean	aBoolean ifTrue: [ 		^votosPositivos 	]. 	^votosNegativos.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Post class	instanceVariableNames: ''!!Post class methodsFor: 'constructor'!usuario: unUsuario texto: unTexto	^self new initialize: unUsuario texto: unTexto.! !Post subclass: #Pregunta	instanceVariableNames: 'titulo respuestas topicos'	classVariableNames: ''	package: 'Objetos2-Model'!!Pregunta methodsFor: 'public' stamp: 'Huggias 5/7/2020 13:34'!borrar	respuestas do: [ :respuesta |		(respuesta usuario) borrarRespuesta: respuesta.	].	usuario borrarPregunta: self.	! !!Pregunta methodsFor: 'public' stamp: 'Huggias 5/16/2020 11:41'!respuestasDelUsuario: unUsuario	^respuestas select: [ :respuesta | respuesta soyDe: unUsuario ].! !!Pregunta methodsFor: 'public' stamp: 'Huggias 5/7/2020 12:58'!tengoElTopico: unTopico	^ topicos anySatisfy: [ :topico | topico = unTopico  ].! !!Pregunta methodsFor: 'public' stamp: 'Huggias 5/8/2020 13:01'!agregarTopico: unTopico	topicos add: unTopico.! !!Pregunta methodsFor: 'public' stamp: 'Huggias 5/7/2020 18:41'!agregarRespuesta: respuesta	respuestas add: respuesta.	respuesta usuario agregarRespuesta: respuesta.! !!Pregunta methodsFor: 'public' stamp: 'Huggias 5/7/2020 11:09'!respuestasOrderByLikes	^ respuestas		asSortedCollection: [ :resp1 :resp2 | resp1 diferenciaDeLikes > resp2 diferenciaDeLikes ]! !!Pregunta methodsFor: 'accessing' stamp: 'Huggias 4/4/2020 13:48'!titulo: unTitulo	titulo := unTitulo.! !!Pregunta methodsFor: 'accessing' stamp: 'Huggias 4/3/2020 18:19'!titulo	^ titulo.! !!Pregunta methodsFor: 'accessing' stamp: 'Huggias 5/8/2020 13:24'!respuestas	^respuestas.! !!Pregunta methodsFor: 'accessing' stamp: 'Huggias 5/7/2020 11:16'!descripcion	^texto.! !!Pregunta methodsFor: 'accessing' stamp: 'Huggias 5/7/2020 11:17'!descripcion: unaDescripcion	texto := unaDescripcion.! !!Pregunta methodsFor: 'accessing' stamp: 'Huggias 5/8/2020 13:20'!topicos	^topicos.! !!Pregunta methodsFor: 'initialization' stamp: 'Huggias 5/7/2020 11:23'!initialize: unUsuario texto: unTexto titulo: unTitulo topicos: unaColeccionDeTopicos	self initialize: unUsuario texto: unTexto.	titulo:= unTitulo.	respuestas:= OrderedCollection new.	topicos := unaColeccionDeTopicos.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Pregunta class	instanceVariableNames: ''!!Pregunta class methodsFor: 'constructor' stamp: 'Huggias 5/7/2020 11:24'!usuario: unUsuario texto: unTexto titulo: unTitulo topicos: unaColeccionDeTopicos 	^self new initialize: unUsuario texto: unTexto titulo: unTitulo topicos: unaColeccionDeTopicos ! !Object subclass: #Sistema	instanceVariableNames: 'usuarios topicos'	classVariableNames: ''	package: 'Objetos2-Model'!!Sistema commentStamp: 'Huggias 4/9/2020 11:47' prior: 0!|application|Sistema clearSoleInstance.CuooraSampleLoader setSoleInstance: Sistema soleInstance. application := WAAdmin register: Login asApplicationAt:'login'.application sessionClass: SessionWithUser!!Sistema methodsFor: 'public' stamp: 'Huggias 5/16/2020 21:34'!validar: aUsername password: aPassword 	^usuarios detect: [ :user | (user compareTo: aUsername  password: aPassword) ] ifNone: [ ^nil. ].! !!Sistema methodsFor: 'public' stamp: 'Huggias 5/16/2020 11:35'!preguntasDeUnTopico: unTopico	^usuarios flatCollect: [:usuario | usuario preguntasConElTopico: unTopico ]! !!Sistema methodsFor: 'public'!agregarTopico: topico	topicos add: topico	! !!Sistema methodsFor: 'public'!agregarUsuario: usuario	usuarios add: usuario! !!Sistema methodsFor: 'public' stamp: 'Huggias 5/16/2020 11:59'!ultimasPreguntasRelevantesDe: unUsuario	^unUsuario ultimasPreguntasRelevantes: self.! !!Sistema methodsFor: 'interface building' stamp: 'Huggias 5/7/2020 11:05'!topicoConNombre: nombreDeTopico 	^ topicos detect: [ :each | each nombre = nombreDeTopico ].! !!Sistema methodsFor: 'accessing'!topicos 	^topicos! !!Sistema methodsFor: 'testing' stamp: 'Huggias 5/7/2020 11:03'!usuarios         	^usuarios! !!Sistema methodsFor: 'initialization' stamp: 'Huggias 4/3/2020 19:43'!initialize	usuarios:= OrderedCollection new.	topicos:= OrderedCollection new.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Sistema class	instanceVariableNames: 'soleInstance'!!Sistema class methodsFor: 'instance creation'!soleInstance 	soleInstance ifNil: [ soleInstance := self new. ].	^soleInstance.! !!Sistema class methodsFor: 'instance creation'!clearSoleInstance 	soleInstance := nil.! !Object subclass: #Topico	instanceVariableNames: 'nombre descripcion'	classVariableNames: ''	package: 'Objetos2-Model'!!Topico methodsFor: 'initialization' stamp: 'Huggias 5/7/2020 11:19'!initialize: unNombre descripcion: unaDescripcion	nombre:= unNombre.	descripcion := unaDescripcion.! !!Topico methodsFor: 'accessing' stamp: 'Huggias 4/4/2020 13:35'!nombre 	^nombre.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Topico class	instanceVariableNames: ''!!Topico class methodsFor: 'constructor' stamp: 'Huggias 5/8/2020 12:53'!nombre: unNombre descripcion: unaDescripcion	^self new initialize: unNombre descripcion: unaDescripcion.! !Object subclass: #Usuario	instanceVariableNames: 'nombre contrasenia fechaDeCreacion preguntas respuestas topicosDeInteres seguidos'	classVariableNames: ''	package: 'Objetos2-Model'!!Usuario methodsFor: 'initialization' stamp: 'Huggias 5/8/2020 12:46'!initialize: unNombre contrasenia: unaContrasenia	nombre:= unNombre.	contrasenia:= unaContrasenia.	fechaDeCreacion := DateAndTime now.	preguntas:= OrderedCollection new.	respuestas:= OrderedCollection new.	topicosDeInteres := OrderedCollection new.	seguidos:= OrderedCollection new.! !!Usuario methodsFor: 'testing'!seguidos	^seguidos.! !!Usuario methodsFor: 'public' stamp: 'Huggias 5/7/2020 13:36'!borrarRespuesta: unaRespuesta	respuestas removeAllSuchThat: [ :respuesta | respuesta = unaRespuesta].! !!Usuario methodsFor: 'public' stamp: 'Huggias 5/7/2020 11:35'!seguir: usuario	seguidos add: usuario.! !!Usuario methodsFor: 'public' stamp: 'Huggias 5/7/2020 11:17'!compareTo: aUsername password: aPassword 	^((nombre = aUsername) & (contrasenia = aPassword)).! !!Usuario methodsFor: 'public' stamp: 'Huggias 5/7/2020 11:41'!dejarDeSeguir: usuario	seguidos removeAllSuchThat: [:usuarioSeguido | usuario = usuarioSeguido].! !!Usuario methodsFor: 'public'!agregarRespuesta: respuesta	respuestas add: respuesta! !!Usuario methodsFor: 'public' stamp: 'Huggias 5/7/2020 12:46'!agregarTopicoInteres: nuevoTopicoDeInteres	topicosDeInteres add: nuevoTopicoDeInteres! !!Usuario methodsFor: 'public'!agregarPregunta: pregunta	preguntas add: pregunta! !!Usuario methodsFor: 'public' stamp: 'Huggias 5/8/2020 16:43'!calcularPuntaje	|puntajePorPreguntas puntajePorRespuestas|	puntajePorPreguntas := preguntas size * 20.	puntajePorRespuestas := ((respuestas size) - (self misRespuestasDeMisPreguntas) size) * 50.	^puntajePorPreguntas + puntajePorRespuestas + self puntajeDeLikes.! !!Usuario methodsFor: 'public' stamp: 'Huggias 5/16/2020 11:58'!ultimasPreguntasRelevantes: unSistema 	| pregs  |	pregs := (self preguntasInteres: unSistema) 		asSortedCollection: [ :each1 :each2 | each2 fecha < each1 fecha ].	^ pregs first: (pregs size min: 5).! !!Usuario methodsFor: 'public' stamp: 'Huggias 5/7/2020 13:37'!borrarPregunta: unaPregunta	preguntas removeAllSuchThat: [ :pregunta | pregunta = unaPregunta ].! !!Usuario methodsFor: 'public' stamp: 'Huggias 5/16/2020 21:08'!preguntasConElTopico: unTopico	^ (preguntas select: [ :pregunta | pregunta tengoElTopico: unTopico. ]) asSet.	! !!Usuario methodsFor: 'accessing'!preguntas	^preguntas! !!Usuario methodsFor: 'accessing'!respuestas	^respuestas.! !!Usuario methodsFor: 'accessing'!nombre	^nombre.! !!Usuario methodsFor: 'accessing' stamp: 'Huggias 5/7/2020 11:17'!contrasenia	^contrasenia.! !!Usuario methodsFor: 'accessing' stamp: 'Huggias 5/7/2020 12:51'!topicos	^topicosDeInteres.! !!Usuario methodsFor: 'private'!puntajeDeLikes	|difPreg difRes|	difPreg:= preguntas sumNumbers: [:var | var diferenciaDeLikes].	difRes:= respuestas sumNumbers: [:var | var diferenciaDeLikes].	^difPreg + difRes ! !!Usuario methodsFor: 'private' stamp: 'Huggias 5/16/2020 11:36'!preguntasDeMisTopicos: unSistema    ^(topicosDeInteres  flatCollect: [:topico | unSistema preguntasDeUnTopico: topico ]) asSet.! !!Usuario methodsFor: 'private' stamp: 'Huggias 5/16/2020 11:58'!preguntasInteres: unSistema	| preguntasDeTopicos preguntasDeSeguidos|	preguntasDeTopicos := self preguntasDeMisTopicos: unSistema.		preguntasDeSeguidos := self preguntasDeMisSeguidos.	^(preguntasDeTopicos union: preguntasDeSeguidos ) asSet .! !!Usuario methodsFor: 'private' stamp: 'Huggias 5/16/2020 21:07'!preguntasDeMisSeguidos	^ (seguidos flatCollect: [ :usuarioSeguido | usuarioSeguido preguntas ]) asSet. ! !!Usuario methodsFor: 'private' stamp: 'Huggias 5/16/2020 11:54'!misRespuestasDeMisPreguntas	 ^preguntas flatCollect: [:pregunta | pregunta respuestasDelUsuario: self ].! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Usuario class	instanceVariableNames: ''!!Usuario class methodsFor: 'constructor' stamp: 'Huggias 5/8/2020 12:46'!nombre: unNombre contrasenia: unaContrasenia	^self new initialize: unNombre contrasenia: unaContrasenia.	! !Object subclass: #Voto	instanceVariableNames: 'fechaDeCreacion usuario'	classVariableNames: ''	package: 'Objetos2-Model'!!Voto methodsFor: 'accessing'!usuario	^usuario! !!Voto methodsFor: 'initialization' stamp: 'Huggias 5/7/2020 11:15'!initialize: unUsuario	fechaDeCreacion := DateAndTime now.	usuario:= unUsuario.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Voto class	instanceVariableNames: ''!!Voto class methodsFor: 'constructor'!usuario: unUsuario	^self new initialize: unUsuario.! !